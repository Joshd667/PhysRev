<div class="py-2 px-4 flex items-center justify-between bg-white/30 dark:bg-gray-800/30 backdrop-blur-sm relative z-10">
    <div class="flex items-center space-x-4">
        <button @click.stop="sidebarVisible = !sidebarVisible; searchVisible = false; $nextTick(() => lucide.createIcons());" class="p-2 bg-white/60 dark:bg-gray-700/60 hover:bg-white/80 dark:hover:bg-gray-600/80 backdrop-blur-sm rounded-lg transition-colors">
            <svg class="w-5 h-5 transition-transform duration-300 text-gray-400 dark:text-gray-500" :class="sidebarVisible ? 'rotate-180' : ''" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </button>
        <div class="flex items-center space-x-3">
            <div class="w-7 h-7 text-blue-600 dark:text-blue-400 flex-shrink-0" x-html="(bannerIcon === 'paper-1' || bannerIcon === 'paper-2' || bannerIcon === 'paper-3') ?
                `<svg class='w-7 h-7' fill='none' stroke='currentColor' viewBox='0 0 24 24'>
                    <path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z'></path>
                    <text x='50%' y='62%' dominant-baseline='middle' text-anchor='middle' fill='currentColor' font-size='10'>${bannerIcon === 'paper-1' ? '1' : bannerIcon === 'paper-2' ? '2' : '3'}</text>
                </svg>` :
                `<i data-lucide='${bannerIcon}' class='w-7 h-7'></i>`">
            </div>
            <div class="space-y-0.5">
                <h2 class="text-xl font-bold text-slate-800 dark:text-slate-200" x-text="bannerTitle"></h2>
                <div x-show="viewType === 'audit'" class="flex items-center gap-2 flex-wrap">
                    <button x-show="viewMode === 'spec'" @click="goBackToMainMenu(); searchVisible = false;" class="inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-700/60 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-gray-700 dark:text-gray-300 hover:text-blue-700 dark:hover:text-blue-300 border border-gray-300 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-700 rounded text-xs font-medium transition-colors">Specification</button>
                    <button x-show="viewMode === 'paper'" @click="goBackToMainMenu(); searchVisible = false;" class="inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-700/60 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-gray-700 dark:text-gray-300 hover:text-blue-700 dark:hover:text-blue-300 border border-gray-300 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-700 rounded text-xs font-medium transition-colors" x-text="selectedPaper"></button>

                    <svg x-show="lastExpandedGroup" x-cloak class="w-3 h-3 text-gray-400 dark:text-gray-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    <button x-show="lastExpandedGroup" x-cloak @click="goBackToGroupCards(); searchVisible = false;" class="inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-700/60 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-gray-700 dark:text-gray-300 hover:text-blue-700 dark:hover:text-blue-300 border border-gray-300 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-700 rounded text-xs font-medium transition-colors" x-text="lastExpandedGroup"></button>

                    <svg x-show="(showingSpecificSection || showingRevision) && currentSection" x-cloak class="w-3 h-3 text-gray-400 dark:text-gray-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    <button x-show="(showingSpecificSection || showingRevision) && currentSection" x-cloak @click="showingRevision = false; showingSpecificSection = true;" class="inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-700/60 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-gray-700 dark:text-gray-300 hover:text-blue-700 dark:hover:text-blue-300 border border-gray-300 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-700 rounded text-xs font-medium transition-colors" x-text="currentSection.title"></button>

                    <svg x-show="showingRevision" x-cloak class="w-3 h-3 text-gray-400 dark:text-gray-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    <span x-show="showingRevision" x-cloak class="inline-flex items-center px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border border-blue-300 dark:border-blue-700 rounded text-xs font-medium" x-text="currentRevisionSectionTitle"></span>
                </div>

                <!-- Content views breadcrumb (shared for notes, flashcards, mindmaps) -->
                <div x-show="((viewType === 'notes' || viewType === 'mindmaps') || (viewType === 'flashcards' && studyMaterialsFilter === 'decks')) && !showTestArea" class="flex items-center gap-2 flex-wrap">
                    <button x-show="viewMode === 'spec'" @click="clearNotesFilters()" :class="viewType === 'notes' ? 'hover:bg-blue-100 dark:hover:bg-blue-900/30 hover:text-blue-700 dark:hover:text-blue-300 hover:border-blue-300 dark:hover:border-blue-700' : viewType === 'flashcards' ? 'hover:bg-purple-100 dark:hover:bg-purple-900/30 hover:text-purple-700 dark:hover:text-purple-300 hover:border-purple-300 dark:hover:border-purple-700' : 'hover:bg-cyan-100 dark:hover:bg-cyan-900/30 hover:text-cyan-700 dark:hover:text-cyan-300 hover:border-cyan-300 dark:hover:border-cyan-700'" class="inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-700/60 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded text-xs font-medium transition-colors">Specification</button>
                    <button x-show="viewMode === 'paper'" @click="clearNotesFilters()" :class="viewType === 'notes' ? 'hover:bg-blue-100 dark:hover:bg-blue-900/30 hover:text-blue-700 dark:hover:text-blue-300 hover:border-blue-300 dark:hover:border-blue-700' : viewType === 'flashcards' ? 'hover:bg-purple-100 dark:hover:bg-purple-900/30 hover:text-purple-700 dark:hover:text-purple-300 hover:border-purple-300 dark:hover:border-purple-700' : 'hover:bg-cyan-100 dark:hover:bg-cyan-900/30 hover:text-cyan-700 dark:hover:text-cyan-300 hover:border-cyan-300 dark:hover:border-cyan-700'" class="inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-700/60 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded text-xs font-medium transition-colors" x-text="selectedPaper"></button>

                    <svg x-show="contentFilterGroup" x-cloak class="w-3 h-3 text-gray-400 dark:text-gray-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    <span x-show="contentFilterGroup" x-cloak class="inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-700/60 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded text-xs font-medium" x-text="contentFilterGroup"></span>

                    <svg x-show="contentFilterSection" x-cloak class="w-3 h-3 text-gray-400 dark:text-gray-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    <span x-show="contentFilterSection" x-cloak :class="viewType === 'notes' ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border-blue-300 dark:border-blue-700' : viewType === 'flashcards' ? 'bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 border-purple-300 dark:border-purple-700' : 'bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-300 border-cyan-300 dark:border-cyan-700'" class="inline-flex items-center px-2 py-1 border rounded text-xs font-medium" x-text="specificationData[contentFilterSection]?.title"></span>
                </div>

                <!-- Test Area breadcrumb -->
                <div x-show="viewType === 'flashcards' && showTestArea" class="flex items-center gap-2 flex-wrap">
                    <button @click="studyMaterialsFilter = 'all'; closeTestArea(); closeTestSetBuilder();" class="inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-700/60 hover:bg-purple-100 dark:hover:bg-purple-900/30 text-gray-700 dark:text-gray-300 hover:text-purple-700 dark:hover:text-purple-300 border border-gray-300 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-700 rounded text-xs font-medium transition-colors">Flashcards</button>
                    <svg class="w-3 h-3 text-gray-400 dark:text-gray-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    <span x-show="!showTestSetBuilder" x-cloak class="inline-flex items-center px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 border border-purple-300 dark:border-purple-700 rounded text-xs font-medium">Test Area</span>
                    <button x-show="showTestSetBuilder" x-cloak @click="closeTestSetBuilder()" class="inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-700/60 hover:bg-purple-100 dark:hover:bg-purple-900/30 text-gray-700 dark:text-gray-300 hover:text-purple-700 dark:hover:text-purple-300 border border-gray-300 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-700 rounded text-xs font-medium transition-colors">Test Area</button>
                    <svg x-show="showTestSetBuilder" x-cloak class="w-3 h-3 text-gray-400 dark:text-gray-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    <span x-show="showTestSetBuilder" x-cloak class="inline-flex items-center px-2 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 border border-purple-300 dark:border-purple-700 rounded text-xs font-medium" x-text="currentTestSetId ? 'Edit Test Set' : 'Create Test Set'"></span>
                </div>
            </div>
        </div>
    </div>

    <div class="flex items-center space-x-2">
        <!-- Online/Offline Status Indicator -->
        <div class="flex items-center space-x-2 px-3 py-1.5 bg-white/60 dark:bg-gray-700/60 backdrop-blur-sm rounded-lg"
             x-data="{ showSyncTooltip: false }"
             @mouseenter="showSyncTooltip = true"
             @mouseleave="showSyncTooltip = false">

            <!-- Online/Offline Dot -->
            <div class="relative">
                <div :class="isOnline ? 'bg-green-500' : 'bg-red-500'"
                     class="w-2 h-2 rounded-full"></div>
                <div :class="isOnline ? 'bg-green-500' : 'bg-red-500'"
                     x-show="isOnline"
                     class="w-2 h-2 rounded-full absolute top-0 left-0 animate-ping"></div>
            </div>

            <!-- Status Text -->
            <span class="text-xs font-medium text-slate-700 dark:text-slate-300"
                  x-text="isOnline ? 'Online' : 'Offline'"></span>

            <!-- Sync Tooltip -->
            <div x-show="showSyncTooltip"
                 x-cloak
                 class="absolute top-full right-0 mt-2 w-48 p-2 bg-gray-900 dark:bg-gray-800 text-white text-xs rounded-lg shadow-lg z-50">
                <div class="space-y-1">
                    <div class="flex justify-between">
                        <span>Status:</span>
                        <span class="font-semibold" x-text="isOnline ? 'Connected' : 'Offline'"></span>
                    </div>
                    <div x-show="lastSyncTime" class="flex justify-between">
                        <span>Last sync:</span>
                        <span class="font-semibold" x-text="getTimeSinceSync()"></span>
                    </div>
                    <div x-show="authMethod === 'teams' && isOnline" class="pt-1 border-t border-gray-700">
                        <button @click="syncDataNow()"
                                class="w-full px-2 py-1 bg-blue-600 hover:bg-blue-700 rounded text-white text-xs font-medium transition-colors">
                            Sync Now
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <button @click="toggleSearch()" class="p-2 bg-white/60 dark:bg-gray-700/60 hover:bg-white/80 dark:hover:bg-gray-600/80 backdrop-blur-sm rounded-lg transition-colors" title="Search topics">
            <i :data-lucide="searchVisible ? 'x' : 'search'" class="w-5 h-5 text-slate-700 dark:text-slate-300"></i>
        </button>
    </div>
</div>
